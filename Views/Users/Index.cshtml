@model IEnumerable<Project.Models.User>

@{
    ViewData["Title"] = "User Management";
    string searchQuery = Context.Request.Query["search"].ToString();


}

<a asp-controller="Auth" asp-action="Logout" class="btn btn-danger mb-3">
    Logout
</a>


        <!-- Title + Create Button -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold">User Management</h2>

        <a class="btn btn-primary btn-lg" href="/Users/Create">
            <i class="bi bi-person-plus"></i> Create User
        </a>
    </div>

    <!-- Search Bar -->
    <form method="get" asp-action="Search">
        <div class="input-group mb-4 shadow-sm">
            <input type="text"
                   name="search"
                   value="@searchQuery"
                   class="form-control form-control-lg"
                   placeholder="Search by username, first name, last name, or role..." />

            <button class="btn btn-dark btn-lg" type="submit">
                <i class="bi bi-search"></i> Search
            </button>
        </div>
    </form>

    <!-- User Table -->
    <div class="card shadow-sm border-0">
        <div class="card-header bg-dark text-white">
            <h5 class="mb-0">Registered Users</h5>
        </div>

        <div class="card-body p-0">

            <table class="table table-striped table-bordered mb-0 align-middle">
                <thead class="table-dark">
                    <tr>
                        <th>Username</th>
                        <th>Password</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Full Name</th>
                        <th>Role</th>
                        <th class="text-end" style="width: 180px;">Actions</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var user in Model)
                    {
                        <tr>
                            <td>@user.Username</td>
                            <td>@user.Password</td>
                            <td>@user.FirstName</td>
                            <td>@user.LastName</td>
                            <td>@($"{user.FirstName} {user.LastName}")</td>
                            <td>
                                <span class="badge bg-secondary">@user.Role</span>
                            </td>

                            <td class="text-end">
                                <a href="/Users/Edit/@user.Id" class="btn btn-warning btn-sm me-2">
                                    <i class="bi bi-pencil-square"></i> Edit
                                </a>

                                <a href="/Users/Delete/@user.Id" class="btn btn-danger btn-sm">
                                    <i class="bi bi-trash"></i> Delete
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>

            </table>
        </div>
    </div>

</div>
